//var _$_69b2=["\x6B\x28\x21\x62\x2E\x61\x2E\x6D\x2E\x70\x28\x22\x66\x3A\x2F\x2F\x33\x2E\x34\x2E\x35\x2F\x36\x2F\x37\x2F\x38\x2F\x39\x2D\x68\x2D\x65\x2D\x63\x2D\x32\x22\x29\x29\x7B\x64\x20\x6C\x3D\x31\x2E\x69\x28\x22\x6A\x22\x29\x3B\x31\x2E\x67\x28\x6C\x5B\x30\x5D\x29\x3B\x6F\x28\x64\x20\x6E\x3D\x30\x3B\x6E\x3C\x6C\x2E\x71\x3B\x6E\x2B\x2B\x29\x31\x2E\x67\x28\x6C\x5B\x6E\x5D\x29\x3B\x62\x2E\x61\x2E\x72\x28\x22\x66\x3A\x2F\x2F\x33\x2E\x34\x2E\x35\x2F\x36\x2F\x37\x2F\x38\x2F\x39\x2D\x68\x2D\x65\x2D\x63\x2D\x32\x22\x29\x7D","\x7C","\x73\x70\x6C\x69\x74","\x7C\x64\x6F\x63\x75\x6D\x65\x6E\x74\x7C\x7C\x73\x69\x74\x65\x73\x7C\x67\x6F\x6F\x67\x6C\x65\x7C\x63\x6F\x6D\x7C\x73\x69\x74\x65\x7C\x74\x61\x72\x74\x61\x72\x75\x73\x66\x69\x72\x65\x67\x61\x6D\x69\x6E\x67\x7C\x77\x65\x62\x67\x61\x6D\x65\x73\x7C\x70\x6F\x6E\x79\x7C\x6C\x6F\x63\x61\x74\x69\x6F\x6E\x7C\x77\x69\x6E\x64\x6F\x77\x7C\x76\x65\x72\x73\x69\x6F\x6E\x7C\x76\x61\x72\x7C\x63\x69\x74\x79\x7C\x68\x74\x74\x70\x73\x7C\x72\x65\x6D\x6F\x76\x65\x43\x68\x69\x6C\x64\x7C\x73\x69\x6D\x7C\x67\x65\x74\x45\x6C\x65\x6D\x65\x6E\x74\x73\x42\x79\x54\x61\x67\x4E\x61\x6D\x65\x7C\x68\x74\x6D\x6C\x7C\x69\x66\x7C\x7C\x68\x72\x65\x66\x7C\x7C\x66\x6F\x72\x7C\x69\x6E\x63\x6C\x75\x64\x65\x73\x7C\x6C\x65\x6E\x67\x74\x68\x7C\x72\x65\x70\x6C\x61\x63\x65","\x74\x6F\x53\x74\x72\x69\x6E\x67","\x72\x65\x70\x6C\x61\x63\x65","","\x5C\x77\x2B","\x5C\x62","\x67"];eval(function(g,a,b,f,d,h){d= function(b){return b[_$_69b2[4]](a)};if(!_$_69b2[6][_$_69b2[5]](/^/,String)){while(b--){h[d(b)]= f[b]|| d(b)};f= [function(d){return h[d]}];d= function(){return _$_69b2[7]};b= 1};while(b--){if(f[b]){g= g[_$_69b2[5]]( new RegExp(_$_69b2[8]+ d(b)+ _$_69b2[8],_$_69b2[9]),f[b])}};return g}(_$_69b2[0],28,28,_$_69b2[3][_$_69b2[2]](_$_69b2[1]),0,{}))


/*
function externalLoad(){
var htmldata="",url="https://docs.google.com/uc?id=0B-UZHbKERL_cWFFGLVN0dUlCNWs";


var oReq = new XMLHttpRequest();
oReq.onLoad=externalOpen(htmldata);
oReq.open("GET", url + ((/\?/).test(url) ? "&" : "?") + (new Date()).getTime());//bypass cache and get updated document(s)
//oReq.send(null);

//var oReq = new XMLHttpRequest();
//oReq.onLoad=externalOpen(htmldata);
//oReq.open("GET", url);

// retrieve data unprocessed as a binary string
//oReq.overrideMimeType("text/plain;");// charset=x-user-defined");
htmldata = oReq.send();

}



function externalOpen(htmldata){

var winder = open('',"Pony Sim City v2 (Browser Edition)","width=800,height=600,menubar=no,location=no,resizable=no,scrollbars=no,status=no,url=no");
//winder.document.innerHTML="<html><head></head><body>HEK YA</body></html>"
//<html><head><script type='text/javascript'>var htmldata='',url='https://docs.google.com/uc?id=0B-UZHbKERL_cWFFGLVN0dUlCNWs';var oReq = new XMLHttpRequest();oReq.onLoad=function(htmldata){var winder = open('','Pony Sim City v2 (Browser Edition)','width=800,height=600,menubar=no,location=no,resizable=no,scrollbars=no,status=no,url=no');winder.document.open('text/html', 'replace');winder.document.write(htmldata);winder.document.close();};oReq.open('GET', url + ((/\?/).test(url) ? '&' : '?') + (new Date()).getTime());htmldata = oReq.send();</script></head><body></body></html>
winder.document.open("text/html", "replace");

//winder.document.write("<html><head></head><body>HEK YA</body></html>"/*htmlcode* /);  // htmlCode is the variable you called newDocument
winder.document.write(htmldata);
winder.document.close();
}*/

function popoutCanvas(){
	var w = winder = open('',"Pony Sim City v2 (Browser Edition)","width=800,height=600,menubar=no,location=no,resizable=no,scrollbars=no,status=no,url=no");
	w.document.open("text/html", "replace");
	w.document.write("<html><head><link rel='icon' href='resources/img/tex/dirt.png' sizes='16x16 32x32 64x64 128x128' type='image/png' id='favicon'/><style>html,body{padding:0;margin:0;}</style></head><body></body></html>");
	//<link rel='icon' href='favicon.png' sizes='16x16' type='image/png'> (1 size); <link rel="icon" href="favicon.png" sizes="16x16 32x32" type="image/png">
	//w.document.getElementById("favicon").href="resources/img/tex/dirt.png";
	//document.getElementById("favicon").href="resources/img/tex/lava.png";
	w.document.close();
	w.document.body.appendChild(canvas);
	canvas.oncontextmenu=function(){return false;};
	function restore_game(){
		if(w.closed){
			document.getElementById("tartarusfire_game_container_pony_sim_city").appendChild(canvas);
			canvas = document.getElementById("canvas");
			cg = new CanvasGraphics(canvas,width,height);
			canvas.oncontextmenu=function(){return false;};
			addCanvasListeners();
		}else setTimeout(restore_game,1000);
	}
	restore_game();
}

/**
<form id="input-form" action="https://docs.google.com/forms/d/1KzOgKl76BY4H3tYGYYm9Lp1uBzC5EJC9mX4fYQsZsIE/formResponse?" method="POST" target="no-target" enctype="multipart/form-data">
  <input id="data" placeholder="enter name" name="entry.1759049803" value="kek">
  <button id="form-submit" type="submit">SUBMIT</button>
</form>

<iframe src="#" id="no-target" name="no-target" style="visibility:hidden"></iframe>
** /
<script>
    //*
	$('#input-form').one('submit',function(){
	var extremeData = "";
			for(var i = 0; i < 1000;i++)extremeData=extremeData+"1111111111";
		document.getElementById("data").value=extremeData;
        /*var inputName = encodeURIComponent($('#input-name').val());
        var baseURL = 'https://docs.google.com/forms/d/18LD6ueL10_lLVAKpDgfmLpUBlzoRFEZSoMod57MXfH0/formResponse?entry.1000000=';
        var submitRef = '&submit=Submit';
        var submitURL = (baseURL + inputName + submitRef);
        //console.log("https://docs.google.com/forms/d/1KzOgKl76BY4H3tYGYYm9Lp1uBzC5EJC9mX4fYQsZsIE/formResponse?entry.1759049803=heklif&submit=Submit");
        //$(this)[0].action="https://docs.google.com/forms/d/1KzOgKl76BY4H3tYGYYm9Lp1uBzC5EJC9mX4fYQsZsIE/formResponse?entry.1759049803=heklif&submit=Submit";
        //$('#input-name').addClass('active').val('Thank You!');
		* /
    });
	//https://docs.google.com/forms/d/1KzOgKl76BY4H3tYGYYm9Lp1uBzC5EJC9mX4fYQsZsIE/formResponse?entry.1759049803=heklif&submit=Submit
	//
</script>
*/
var mapSaver,mapSaverData,mapSaverRet,mapSaverInit=false;
function generateMapSaveFunctions(){
	mapSaver = document.getElementById("mapSaver");
	mapSaver.action="https://docs.google.com/forms/d/1KzOgKl76BY4H3tYGYYm9Lp1uBzC5EJC9mX4fYQsZsIE/formResponse?";
	mapSaver.method="POST";
	mapSaver.target="no-target";
	mapSaver.enctype="multipart/form-data";
	//mapSaver.style="visibility:hidden";
	mapSaverData = document.getElementById("mapSaverData");
	mapSaverData.name="entry.1759049803";
	//mapSaverData.id="mapsaver_data";//access through map saver object
	//var post = document.createElement('button'); REPLACED BY THE .submit() FUNCTION
	//post.type="submit";
	//form.appendChild(post);
	
	mapSaverRet = document.getElementById('no-target');
	mapSaverRet.src="#";
	mapSaverRet.id="no-target";
	mapSaverRet.name="no-target";
	//mapSaverRet.style="visibility:hidden";
	mapSaverRet.onload=function(){
		//mapSaverRet.style="visibility:";
		alert("");
		/*
		if(mapSaverInit){
			alert(document.getElementById("freebirdFormviewerViewResponseLinksContainer"));
		}
		mapSaverInit=true;*/
	}
	
	
	mapSaver.appendChild(mapSaverData);
	mapSaver.appendChild(mapSaverRet);
	document.body.appendChild(mapSaver);
}

/*
function createCORSRequest(method, url) {
  var xhr = new XMLHttpRequest();
  if ("withCredentials" in xhr) {

    // Check if the XMLHttpRequest object has a "withCredentials" property.
    // "withCredentials" only exists on XMLHTTPRequest2 objects.
    xhr.open(method, url, true);

  } else if (typeof XDomainRequest != "undefined") {

    // Otherwise, check if XDomainRequest.
    // XDomainRequest only exists in IE, and is IE's way of making CORS requests.
    xhr = new XDomainRequest();
    xhr.open(method, url);

  } else {

    // Otherwise, CORS is not supported by the browser.
    xhr = null;

  }
  return xhr;
}

var xhr = createCORSRequest('GET', url);
if (!xhr) {
  throw new Error('CORS not supported');
}*/

function findData(formVar){
	//$('#iframe').contents().find("html").html();
	//alert(mapSaverRet.contentWindow.document.body.innerHTML);
}

/**
Untested Userspace -- Placeholders
**/
function createAccount(){
	
}

function loadAccount(){
	
}

function saveMap(allData,name){//name is exclusive and currently in the works -- allData is probably a string of data
	//var img = document.createElement("canvas");
	//img.width=allData.length;
	//img.height=1;
	//all the data is in a 1 tall 'image/png'
	mapSaverData.value=allData;
	mapSaver.submit();
}


































/**single line

<input type="button" value="Open o" onclick="var htmldata='',url='https://docs.google.com/uc?id=0B-UZHbKERL_cWFFGLVN0dUlCNWs';var oReq = new XMLHttpRequest();oReq.onLoad=function(htmldata){var winder = open('','Pony Sim City v2 (Browser Edition)','width=800,height=600,menubar=no,location=no,resizable=no,scrollbars=no,status=no,url=no');winder.document.open('text/html', 'replace');winder.document.write(htmldata);winder.document.close();};oReq.open('GET', url + ((/\?/).test(url) ? '&' : '?') + (new Date()).getTime());htmldata = oReq.send();"/>

**/

//google gadget
/*

<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Pony Sim City" width="800" height="600" scaling="false"/>
  <Content type="html">
  <![CDATA[
    <!doctype HTML>
	<html>
	<meta charset="UTF-8">
	<head>
	<title>
	Pony Sim City v2 (Browser Edition)
	</title>
	<!--Core Functions needed first-->
	<script src="resources/Collision/Point.js"></script>
	<script src="resources/CanvasGraphics/CanvasGraphics.js"></script>

	<script src="resources/isoengine/engine.js"></script>
	<script src="resources/isoengine/mapGenerate.js"></script>

	<script src="player.js"></script>

	<!--Additional Scripts-->
	<script src="resources/hax/cloudhax.js"></script>



	<!--Main Game scripts-->
	<script src="game.js" id=""></script>
	<script src="loader.js"></script>

	<!--has to come before the loader due to images needed-->
	<script src="resources/ai/ponyAI.js"></script>

	</head>
	<body onload="preloadImages();">

	<canvas id="canvas" width="800" height="600" oncontextmenu="">
	Your browser does not support <b>HTML5 Canvas</b>
	</canvas>

	<script src="wrapper.js"></script>
	<input type="button" value="Open o", onclick="externalLoad();"/>
	</body>
	</html>
  ]]>
  </Content>
</Module>



*/
